> reference ： https://my.oschina.net/u/3773384/blog/1810111

#### 主从配置
##### 主
docker run --name mysql_master -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7
docker cp mysql_master:/etc/mysql/my.cnf C:\Users\xingwang.mo\Documents\docker\mysql57\mysqlData\master\cnf\my.cnf
docker cp  C:\Users\xingwang.mo\Documents\docker\mysql57\mysqlData\master\cnf\my.cnf mysql_master:/etc/mysql/my.cnf

##### 从
docker run --name mysql_slave -p 3307:3306 -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7
docker cp mysql_slave:/etc/mysql/my.cnf C:\Users\xingwang.mo\Documents\docker\mysql57\mysqlData\slave\cnf\my.cnf
docker cp  C:\Users\xingwang.mo\Documents\docker\mysql57\mysqlData\slave\cnf\my.cnf mysql_slave:/etc/mysql/my.cnf

#### 启动主从

* 主从同时创建用户并且授权
```aidl
CREATE USER 'docker'@'%' IDENTIFIED BY '123456';
GRANT ALL ON * TO 'docker'@'%';
flush privileges;
```



* 从库操作连接到主库
```aidl
CHANGE MASTER TO
MASTER_HOST='172.17.0.2',
MASTER_PORT=3306,
MASTER_USER='docker',
MASTER_PASSWORD='123456';

start slave user='docker' password='123456';
stop SLAVE;

show slave status;
```

#### test
```aidl
create database test;
use test;
create table tx_config(
  id bigint auto_increment comment '规则id'
    primary key,
  config_name varchar(100) not null comment '规则名称',
  create_time datetime null comment '创建时间'
)engine =innodb comment '规则配置表' charset=utf8
;
```